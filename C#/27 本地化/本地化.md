## 本地化
本章要点：
1. 数字和日期的格式化
2. 为本地化内容使用资源
3. 本地化`ASP.NET Core Web`应用程序
4. 本地化通用Windows应用程序

### 全球市场
采用全球化策略，应用程序应根据区域性、不同的日历等支持不同的数字和日期格式。本地化（localization）用于为特定的区域性翻译应用程序。而字符串的翻译可以使用资源，如.NET资源或WPF资源字典。

.NET 支持Windows和Web应用程序的全球化和本地化。
全球化：System.Globalization名称空间中的类。
本地化：System.Resources名称空间中的类。

- Unicode问题
- 区域性和区域
- 显示所有区域性及其特征的例子
- 排序

#### Unicode问题

#### 区域性和区域
System.Globalization名称空间中，最重要的类CultureInfo。这个类表示区域性，定义了日历、数字和日期的格式，以及和区域性一起使用的排序字符串。

RegionInfo类表示区域设置（如货币），说明该区域是否使用米制系统。在某些区域可以使用多种语言。

#### CurrentCulture和CurrentUICulture
设置区域性时，必须区分用户界面的区域性和数字及日期格式的区域性。
区域性与线程相关，通过这两种区域性类型，就可以把两种区域性设置应用于线程。

CultureInfo类提供了静态属性CurrentCulture和CurrentUICulture。CurrentCulture属性用于设置与格式化和排序选项一起使用的区域性。

CurrentUICluture属性用于设置用户界面的语言。

使用Windows设置中的Time & Language，再从中选择REGION & LANGUAGE选项，用户就可以安装其他语言，配置为默认的语言是当前的UI区域。

#### 数字格式化
System名称空间中的数字结构Int16、int32和int64等都有一个重载的ToString（）方法。这个方法可以根据区域设置创建不同的数字表示法。对于Int32由下述4中重载版本。
```csharp
public string ToString();
public string ToString(IFormatProvider);
public string ToString(string);
public string ToString(string,IFormatProvider);
```

不带参数的ToString方法返回一个没有格式化选项的字符串，也可以给ToString传递一个字符串和一个实现IFormatProvider接口的类。

该字符串指定表示法的格式，而这个格式可以是标准数字格式或图形数字格式。

==对于标准数字格式化，字符串时预定义的。例如：==
> `C` 表示货币符号
> `D` 表示输出为小数
> `E` 表示输出用科学计数法表示
> `F` 表示定点输出
> `G` 表示一般输出
> `N` 表示输出为数字
> `X` 表示输出为十六进制

==对于图形数字格式化字符串，可以指定位数、节、和组分隔符、百分号等。例如：==
> `###,###` 表示两个三位数块被一个组分隔符分开。

IFormatProvider接口由NumberFormatInfo、DateTimeFormatInfo和CultureInfo类实现。这个接口定义了GetFormat（）方法，它返回一个格式对象。

##### NumberFormatInfo类
该类可以为数字定义自定义格式。使用NumberFormatInfo类的默认构造函数，可以创建独立于区域性的对象或不变的对象。

使用这个类的属性，可以改变所有格式化选项，如正号、百分号、数字组分隔符和货币符号等。

从静态属性InvariantInfo返回一个与区域性无关的只读NumberFormatInfo对象呢。该对象的格式化值取决于当前线程的CultureInfo类，该线程从静态属性CurrentInfo返回。

```
NumberAndDateFormatting使用如下名称空间

System
System.Globalization
```

下一个示例使用一个简单的控制台应用程序。
第一示例：显示了当前线程区域性格式（这里是English-US，是操作系统的设置）中所显示的数字。

第二示例：使用了带有IFormatProvider参数的ToString方法。CultureInfo类实现IFormatProvider接口，所以创建一个使用法国区域性的ClutureInfo对象。

第三示例：改变了当前线程的区域性。使用CultureInfo实现的CurrentCulture属性，把区域性改为德国。（代码：NumberAndDateFormatting/Program.cs）
```csharp
        public static void NumberFormatDemo()
        {
            int val = 1234567890;

            //culture of the current thread
            Console.WriteLine(val.ToString("N"));

            //use IFormatProvider
            Console.WriteLine(val.ToString("N",new CultureInfo("fr-FR")));

            //change the culture of the thread
            CultureInfo.CurrentCulture = new CultureInfo("de-DE");
            Console.WriteLine(val.ToString("N"));
        }

out:
Hello World!
1,234,567,890.00
1?234?567?890,00
1.234.567.890,00
```






##### DateTimeFormatInfo










##### CultureInfo




#### 日期格式化
对于日期，VS提供了与数字相同的支持。DateTime结构有一些把日期转换为字符串的ToString方法重载。可以传递字符串格式并指定另一种区域性。
```csharp
public string ToString();
public string ToString(IFormatProvider);
public string ToString(string);
public string ToString(string,IFormatProvider);
```